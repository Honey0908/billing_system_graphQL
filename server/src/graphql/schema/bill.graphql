# Bill schema

type Bill {
  id: ID!
  title: String!
  createdAt: String!
  user: User!
  items: [BillItem!]!
  totalAmount: Float!
  firm: Firm!
  customerName: String
  customerPhone: String
}

type BillItem {
  id: ID!
  product: Product
  productName: String!
  quantity: Int!
  price: Float!
  total: Float!
}

type MonthlyStats {
  month: Int!
  year: Int!
  billsCount: Int!
  totalAmount: Float!
}

input BillItemInput {
  productId: ID
  productName: String!
  price: Float
  quantity: Int!
}

input CreateBillInput {
  title: String!
  customerName: String
  customerPhone: String
  items: [BillItemInput!]!
}

extend type Query {
  bills: [Bill!]!
  bill(id: ID!): Bill
  myBills: [Bill!]!
  monthlyStats(month: Int!, year: Int!): MonthlyStats!
  myMonthlyStats(month: Int!, year: Int!): MonthlyStats!
}

extend type Mutation {
  createBill(input: CreateBillInput!): Bill!
  updateBill(id: ID!, input: CreateBillInput!): Bill!
  deleteBill(id: ID!): Boolean!
}
